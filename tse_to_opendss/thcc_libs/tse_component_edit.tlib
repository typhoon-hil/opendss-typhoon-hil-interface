//
// Saved by sw version: 2023.2 DEV
//

library "OpenDSS" {
    configuration {
        hil_device = "HIL604"
        hil_configuration_id = 1
        simulation_method = exact
        simulation_time_step = auto
        simulation_discret_scaling = 1.0
        dsp_timer_periods = 100e-6, 50e-3
        ss_calc_method = "systematic elimination"
        enb_pole_shift = True
        enb_gds_oversampling = True
        show_modes = False
        device_ao_limit_enable = False
        reset_analog_outputs_on_sim_stop = True
        reset_digital_outputs_on_sim_stop = True
        vhil_adio_loopback = False
        cpl_stb = False
        enb_dep_sw_detect = False
        code_section = "internal memory"
        data_section = "internal memory"
        sys_sp_rate_1 = 0.0001
        sys_sp_rate_2 = 0.05
        sys_real_type_precision = "default"
        user_real_type_precision = "default"
        sys_cpu_optimization = "high"
        user_cpu_optimization = "high"
        user_cpu_part_option = "default"
        matrix_based_reduction = True
        cpl_dynamics_analysis = False
        export_ss_to_pickle = False
        ground_scope_core = False
        dss_num_tol = 1e-15
        cce_platform = "generic"
        cce_use_relative_names = False
        cce_type_mapping_real = "double"
        cce_type_mapping_uint = "unsigned int"
        cce_type_mapping_int = "int"
        cce_directory = ""
        cce_custom_type_int = ""
        cce_custom_type_uint = ""
        cce_custom_type_real = ""
        tunable_params = "component defined"
        sp_compiler_type = "C compiler"
        sig_stim = "off"
        export_resource_list = ""
        export_dependency_list = ""
        excluded_resource_list = ""
        export_out_file = ""
        export_lock_top_level = True
        export_encrypt_library = True
        export_encrypt_resources = True
    }

    component Subsystem Root {
        component Subsystem "PV System" {
            layout = dynamic
            component "core/Resistor" RfA {
                resistance = "Rf"
            }
            [
                position = 7928, 7944
            ]

            component "core/Resistor" RfB {
                resistance = "Rf"
            }
            [
                position = 7928, 8096
            ]

            component "core/Resistor" RfC {
                resistance = "Rf"
            }
            [
                position = 7920, 8272
            ]

            component "core/Inductor" LfA {
                inductance = "Lf"
            }
            [
                position = 7824, 7944
            ]

            component "core/Inductor" LfB {
                inductance = "Lf"
            }
            [
                position = 7824, 8096
            ]

            component "core/Inductor" LfC {
                inductance = "Lf"
            }
            [
                position = 7816, 8272
            ]

            component "core/Signal Controlled Voltage Source" VspA {
            }
            [
                position = 7632, 7944
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Signal Controlled Voltage Source" VspC {
            }
            [
                position = 7624, 8272
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Signal Controlled Voltage Source" VspB {
            }
            [
                position = 7632, 8096
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Current Measurement" IA {
                execution_rate = "ts"
                sig_output = "True"
                signal_access = "Inherit"
            }
            [
                position = 7728, 7944
                size = 64, 32
            ]

            component "core/Current Measurement" IB {
                execution_rate = "ts"
                sig_output = "True"
                signal_access = "Inherit"
            }
            [
                position = 7728, 8096
                size = 64, 32
            ]

            component "core/Current Measurement" IC {
                execution_rate = "ts"
                sig_output = "True"
                signal_access = "Inherit"
            }
            [
                position = 7720, 8272
                size = 64, 32
            ]

            component "core/Voltage Measurement" VA {
                execution_rate = "ts"
                sig_output = "True"
                signal_access = "Inherit"
            }
            [
                position = 8488, 8096
                rotation = right
                size = 64, 32
            ]

            component "core/Voltage Measurement" VB {
                execution_rate = "ts"
                sig_output = "True"
                signal_access = "Inherit"
            }
            [
                position = 8272, 8272
                rotation = right
                size = 64, 32
            ]

            component "core/Voltage Measurement" VC {
                execution_rate = "ts"
                sig_output = "True"
                signal_access = "Inherit"
            }
            [
                position = 8080, 8432
                rotation = right
                size = 64, 32
            ]

            component Subsystem PVControl {
                layout = dynamic
                component "core/Gain" Ipu {
                    gain = "1/Iac_nom_pk"
                }
                [
                    position = 7656, 8272
                ]

                component "core/Bus Split" "Bus Split2" {
                    outputs = "3"
                }
                [
                    position = 7736, 8272
                    hide_name = True
                ]

                component "core/abc to dq" Iabc2dq {
                    disable_filter = "False"
                    wn_LPFdq = "62.83185307"
                }
                [
                    position = 7856, 8280
                    size = 48, 80
                ]

                component Subsystem Currrent_Control {
                    layout = dynamic
                    component "core/PID controller" PI_q {
                        controller_type = "PI"
                        enb_anti_windup_out = "True"
                        enb_output_limit_out = "True"
                        ki = "Iki"
                        ki_source = "external"
                        kp = "Ikp"
                        kp_source = "external"
                        lower_sat_lim = "LowerLimit_I"
                        show_reset = "level"
                        upper_sat_lim = "UpperLimit_I"
                    }
                    [
                        position = 8384, 8312
                    ]

                    component "core/Sum" Sum1 {
                        signs = "-+"
                    }
                    [
                        position = 8256, 8072
                        rotation = down
                        hide_name = True
                        scale = -1, 1
                    ]

                    component "core/Sum" Sum2 {
                        signs = "-++"
                    }
                    [
                        position = 8544, 8120
                        rotation = down
                        hide_name = True
                        scale = -1, 1
                    ]

                    component "core/Sum" Sum3 {
                        signs = "+-"
                    }
                    [
                        position = 8256, 8288
                        rotation = down
                        hide_name = True
                        scale = -1, 1
                    ]

                    component "core/Sum" Sum4 {
                        signs = "+++"
                    }
                    [
                        position = 8544, 8312
                        rotation = down
                        hide_name = True
                        scale = -1, 1
                    ]

                    component "core/Gain" Gain1 {
                        gain = "Xl_pu"
                    }
                    [
                        position = 8328, 8184
                        hide_name = True
                    ]

                    component "core/Gain" Gain2 {
                        gain = "Xl_pu"
                    }
                    [
                        position = 8328, 8240
                        hide_name = True
                    ]

                    component "core/Limit" Limit_d {
                        lower_limit = "LowerLimit_I"
                        upper_limit = "UpperLimit_I"
                    }
                    [
                        position = 8672, 8120
                    ]

                    component "core/Limit" Limit_q {
                        lower_limit = "LowerLimit_I"
                        upper_limit = "UpperLimit_I"
                    }
                    [
                        position = 8672, 8312
                    ]

                    component "core/Logical operator" "Logical operator1" {
                        operator = "NOT"
                    }
                    [
                        position = 8224, 8464
                        hide_name = True
                    ]

                    component "core/PID controller" PI_d {
                        controller_type = "PI"
                        enb_anti_windup_out = "True"
                        enb_output_limit_out = "True"
                        ki = "Iki"
                        ki_source = "external"
                        kp = "Ikp"
                        kp_source = "external"
                        lower_sat_lim = "LowerLimit_I"
                        show_reset = "level"
                        upper_sat_lim = "UpperLimit_I"
                    }
                    [
                        position = 8376, 8096
                    ]

                    component "core/Gain" Gain3 {
                        gain = "1.0"
                    }
                    [
                        position = 8432, 8016
                        hide_name = True
                    ]

                    component "core/Gain" Gain4 {
                        gain = "1.0"
                    }
                    [
                        position = 8392, 8240
                        hide_name = True
                    ]

                    component "core/Gain" Gain5 {
                        gain = "1.0"
                    }
                    [
                        position = 8472, 8376
                        rotation = left
                        hide_name = True
                    ]

                    component "core/Gain" Gain6 {
                        gain = "1.0"
                    }
                    [
                        position = 8392, 8184
                        hide_name = True
                    ]

                    component "core/Gain" Gain8 {
                        gain = "1.0"
                    }
                    [
                        position = 8448, 8312
                        hide_name = True
                    ]

                    component "core/SCADA Input" Kp {
                        def_value = "Ikp"
                        execution_rate = "ts"
                        max = "500"
                        min = "-500"
                        unit = ""
                    }
                    [
                        position = 7888, 7960
                    ]

                    component "core/SCADA Input" Ki {
                        def_value = "Iki"
                        execution_rate = "ts"
                        max = "500"
                        min = "-500"
                        unit = ""
                    }
                    [
                        position = 7888, 8024
                    ]

                    component "core/Gain" Gain9 {
                        gain = "1.0"
                    }
                    [
                        position = 8432, 8096
                        hide_name = True
                    ]

                    port Iqref {
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8128, 8320
                    ]

                    port Iq {
                        position = left:4
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8128, 8272
                    ]

                    port Vd {
                        position = left:6
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8224, 7936
                    ]

                    port Vq {
                        position = left:7
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8376, 7936
                    ]

                    port en {
                        position = bottom:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8136, 8464
                    ]

                    port md {
                        position = auto:auto
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8752, 8120
                    ]

                    port mq {
                        position = auto:auto
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8752, 8312
                    ]

                    port Idref {
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8128, 8040
                    ]

                    port Id {
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8128, 8104
                    ]

                    tag Goto1 {
                        value = "reset"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8312, 8464
                        hide_name = True
                        size = 60, 20
                    ]

                    tag Goto2 {
                        value = "Vd"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8296, 7936
                        hide_name = True
                        size = 60, 20
                    ]

                    tag Goto3 {
                        value = "Vq"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8456, 7936
                        hide_name = True
                        size = 60, 20
                    ]

                    tag From1 {
                        value = "Vd"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8344, 8016
                        hide_name = True
                        size = 60, 20
                    ]

                    tag From2 {
                        value = "Vq"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8400, 8416
                        hide_name = True
                        size = 60, 20
                    ]

                    tag From3 {
                        value = "reset"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8248, 8384
                        hide_name = True
                        size = 60, 20
                    ]

                    tag From4 {
                        value = "reset"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8256, 8160
                        hide_name = True
                        size = 60, 20
                    ]

                    tag Goto4 {
                        value = "Kp"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 7984, 7960
                        hide_name = True
                        size = 60, 20
                    ]

                    tag Goto5 {
                        value = "Ki"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 7984, 8024
                        hide_name = True
                        size = 60, 20
                    ]

                    tag From5 {
                        value = "Kp"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8256, 8112
                        hide_name = True
                        size = 60, 20
                    ]

                    tag From6 {
                        value = "Ki"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8256, 8136
                        hide_name = True
                        size = 60, 20
                    ]

                    tag From7 {
                        value = "Kp"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8248, 8336
                        hide_name = True
                        size = 60, 20
                    ]

                    tag From8 {
                        value = "Ki"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8248, 8360
                        hide_name = True
                        size = 60, 20
                    ]

                    junction Junction1 sp
                    [
                        position = 8216, 8104
                    ]

                    junction Junction2 sp
                    [
                        position = 8216, 8272
                    ]

                    comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Considering constant frequency :</p></body></html> ENDCOMMENT 
                    [
                        position = 8008, 8200
                    ]

                    connect Idref Sum1.in1 as Connection2
                    connect Sum1.out PI_d.in as Connection4
                    connect Vd Goto2 as Connection6
                    connect Vq Goto3 as Connection7
                    connect Iqref Sum3.in as Connection9
                    connect Sum3.out PI_q.in as Connection11
                    connect Id Junction1 as Connection12
                    connect Junction1 Sum1.in as Connection13
                    connect Gain1.in Junction1 as Connection14
                    connect Iq Junction2 as Connection16
                    connect Junction2 Sum3.in1 as Connection17
                    connect Gain2.in Junction2 as Connection18
                    connect Sum2.out Limit_d.in as Connection26
                    connect Limit_d.out md as Connection27
                    connect Sum4.out Limit_q.in as Connection28
                    connect Limit_q.out mq as Connection29
                    connect en "Logical operator1.in" as Connection30
                    connect "Logical operator1.out" Goto1 as Connection31
                    connect From1 Gain3.in as Connection32
                    connect Gain3.out Sum2.in2 as Connection33
                    connect Gain2.out Gain4.in as Connection34
                    connect Gain4.out Sum2.in as Connection35
                    [
                        position = 0, 0
                        breakpoints = 8464, 8240; 8464, 8136
                    ]
                    connect From2 Gain5.in as Connection36
                    connect Gain5.out Sum4.in as Connection37
                    connect Gain1.out Gain6.in as Connection38
                    connect Gain6.out Sum4.in2 as Connection39
                    connect PI_q.out Gain8.in as Connection42
                    connect Gain8.out Sum4.in1 as Connection43
                    connect Kp.out Goto4 as Connection44
                    connect Ki.out Goto5 as Connection45
                    connect PI_d.out Gain9.in as Connection51
                    connect Gain9.out Sum2.in1 as Connection52
                    [
                        position = 0, 0
                        breakpoints = 8464, 8096; 8464, 8120
                    ]
                    connect From7 PI_q.kp_in as Connection53
                    [
                        position = 0, 0
                    ]
                    connect PI_q.ki_in From8 as Connection54
                    [
                        position = 0, 0
                    ]
                    connect PI_q.reset From3 as Connection55
                    [
                        position = 0, 0
                        breakpoints = 8344, 8336; 8344, 8384
                    ]
                    connect From5 PI_d.kp_in as Connection56
                    [
                        position = 0, 0
                    ]
                    connect From6 PI_d.ki_in as Connection57
                    [
                        position = 0, 0
                    ]
                    connect From4 PI_d.reset as Connection58
                }
                [
                    position = 9208, 8400
                    size = 120, 112
                ]

                component "core/SCADA Input" Id_ref {
                    execution_rate = "ts"
                    max = "1.5"
                    min = "-1.5"
                    unit = ""
                }
                [
                    position = 9112, 8256
                ]

                component "core/SCADA Input" Iq_ref {
                    execution_rate = "ts"
                    max = "1.5"
                    min = "-1.5"
                    unit = ""
                }
                [
                    position = 9160, 8232
                ]

                component "core/Product" Product5 {
                    signs = "*/"
                }
                [
                    position = 9576, 8344
                    hide_name = True
                ]

                component "core/Product" Product8 {
                    signs = "*/"
                }
                [
                    position = 9576, 8496
                    hide_name = True
                ]

                component "core/Signal switch" "Signal switch1" {
                    criterion = "ctrl >= threshold"
                }
                [
                    position = 9440, 8336
                    hide_name = True
                ]

                component "core/SCADA Input" I_Ctrl_dbg {
                    execution_rate = "ts"
                    format = "int"
                    max = "1"
                    min = "0"
                    signal_type = "int"
                    unit = ""
                }
                [
                    position = 9424, 8216
                ]

                component "core/Signal switch" "Signal switch2" {
                    criterion = "ctrl >= threshold"
                }
                [
                    position = 9440, 8488
                    hide_name = True
                ]

                component "core/Probe" md_prob {
                }
                [
                    position = 9776, 8344
                ]

                component "core/Probe" mq_prob {
                }
                [
                    position = 9784, 8496
                ]

                component "core/SCADA Input" Q_ref {
                    execution_rate = "ts"
                    max = "1.5"
                    min = "-1.5"
                    unit = ""
                }
                [
                    position = 8608, 8184
                ]

                component "core/SCADA Input" P_ref {
                    execution_rate = "ts"
                    max = "1.5"
                    min = "-1.5"
                    unit = ""
                }
                [
                    position = 8656, 8144
                ]

                component "core/Signal switch" "Signal switch7" {
                    criterion = "ctrl >= threshold"
                }
                [
                    position = 8856, 8360
                    hide_name = True
                ]

                component "core/SCADA Input" P_Ctrl_dbg {
                    execution_rate = "ts"
                    format = "int"
                    max = "1"
                    min = "0"
                    signal_type = "int"
                    unit = ""
                }
                [
                    position = 8784, 8216
                ]

                component "core/Signal switch" "Signal switch8" {
                    criterion = "ctrl >= threshold"
                }
                [
                    position = 8856, 8472
                    hide_name = True
                ]

                component "core/dq to abc" dq2abc {
                    execution_rate = "inherit"
                }
                [
                    position = 9952, 8424
                    size = 48, 80
                ]

                component "core/Constant" Zero_cte {
                    execution_rate = "ts"
                    value = "0"
                }
                [
                    position = 8280, 7936
                    hide_name = True
                ]

                component "core/SCADA Input" enable {
                    def_value = "1"
                    execution_rate = "ts"
                    format = "int"
                    max = "1"
                    min = "0"
                    signal_type = "int"
                    unit = ""
                }
                [
                    position = 8744, 7864
                ]

                component "core/Clock" Clock1 {
                    enb_reset = "True"
                    execution_rate = "ts"
                    reset_at = "5.0"
                }
                [
                    position = 8504, 7960
                    hide_name = True
                ]

                component "core/SR Flip Flop" "SR Flip Flop1" {
                }
                [
                    position = 8752, 7952
                    hide_name = True
                ]

                component "core/Comparator" Comparator1 {
                }
                [
                    position = 8592, 7936
                    hide_name = True
                ]

                component "core/Constant" Constant5 {
                    execution_rate = "ts"
                    value = "0.5"
                }
                [
                    position = 8504, 7912
                    hide_name = True
                ]

                component "core/Edge Detection" "Edge Detection1" {
                    edge = "falling"
                }
                [
                    position = 8656, 7936
                    hide_name = True
                    size = 32, 32
                ]

                component "core/Logical operator" "Logical operator2" {
                }
                [
                    position = 8848, 7912
                    hide_name = True
                ]

                component "core/Termination" Termination6 {
                }
                [
                    position = 8848, 7968
                    hide_name = True
                ]

                component "core/Probe" Id_pb {
                }
                [
                    position = 8360, 8640
                ]

                component "core/Probe" Iq_pb {
                }
                [
                    position = 8416, 8680
                ]

                component "core/Probe" Vd_pb {
                }
                [
                    position = 8360, 8720
                ]

                component "core/Probe" Vq_pb {
                }
                [
                    position = 8416, 8760
                ]

                component "core/Gain" Gain1 {
                    gain = "Vac_nom_pk"
                }
                [
                    position = 9664, 8648
                    hide_name = True
                ]

                component "core/Gain" Gain2 {
                    gain = "Vac_nom_pk"
                }
                [
                    position = 9664, 8776
                    hide_name = True
                ]

                component "core/Gain" Gain3 {
                    gain = "Vac_nom_pk"
                }
                [
                    position = 9656, 8896
                    hide_name = True
                ]

                component "core/Product" Product9 {
                    signs = "**"
                }
                [
                    position = 9576, 8648
                    hide_name = True
                ]

                component "core/Product" Product10 {
                    signs = "**"
                }
                [
                    position = 9576, 8776
                    hide_name = True
                ]

                component "core/Product" Product11 {
                    signs = "**"
                }
                [
                    position = 9568, 8896
                    hide_name = True
                ]

                component "core/Signal switch" "Signal switch9" {
                    criterion = "ctrl >= threshold"
                }
                [
                    position = 9752, 8664
                    hide_name = True
                ]

                component "core/Signal switch" "Signal switch10" {
                    criterion = "ctrl >= threshold"
                }
                [
                    position = 9752, 8792
                    hide_name = True
                ]

                component "core/Signal switch" "Signal switch11" {
                    criterion = "ctrl >= threshold"
                }
                [
                    position = 9760, 8912
                    hide_name = True
                ]

                component "core/Gain" Vpu {
                    gain = "1/Vac_nom_pk"
                }
                [
                    position = 7656, 8112
                ]

                component "core/Bus Split" "Bus Split1" {
                    outputs = "3"
                }
                [
                    position = 7736, 8112
                    hide_name = True
                ]

                component "core/Termination" Termination1 {
                }
                [
                    position = 8024, 8112
                    hide_name = True
                ]

                component "core/Three phase PLL" PLL_V {
                    enable_sin = "False"
                    enable_zero = "False"
                    initial_filter_output = "50.0"
                }
                [
                    position = 7856, 8112
                    size = 64, 128
                ]

                component "core/Product" Product12 {
                }
                [
                    position = 7792, 8776
                    hide_name = True
                ]

                component "core/Product" Product13 {
                }
                [
                    position = 7792, 8824
                    hide_name = True
                ]

                component "core/Sum" Sum2 {
                    signs = "++"
                }
                [
                    position = 7944, 8800
                    hide_name = True
                ]

                component "core/Product" Product15 {
                }
                [
                    position = 7792, 8888
                    hide_name = True
                ]

                component "core/Product" Product16 {
                }
                [
                    position = 7792, 8936
                    hide_name = True
                ]

                component "core/Sum" Sum3 {
                    signs = "+-"
                }
                [
                    position = 7944, 8912
                    hide_name = True
                ]

                component "core/Probe" Pmeas {
                }
                [
                    position = 8056, 8752
                ]

                component "core/Probe" Qmeas {
                }
                [
                    position = 8056, 8856
                ]

                component "core/Termination" Termination2 {
                }
                [
                    position = 8024, 8304
                    hide_name = True
                ]

                component "core/Constant" half_VDCpu {
                    execution_rate = "ts"
                }
                [
                    position = 7576, 8416
                ]

                port Iabc {
                    position = left:2
                    kind = sp
                    direction =  out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7576, 8272
                ]

                port modA {
                    position = right:1
                    kind = sp
                    direction =  in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 9824, 8664
                ]

                port en_inv {
                    position = auto:auto
                    kind = sp
                    direction =  in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 9832, 8968
                ]

                port modB {
                    position = right:2
                    kind = sp
                    direction =  in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 9832, 8792
                ]

                port modC {
                    position = right:3
                    kind = sp
                    direction =  in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 9832, 8912
                ]

                port Vabc {
                    position = left:1
                    kind = sp
                    direction =  out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7576, 8112
                ]

                port Pref_ext {
                    label = "Pref"
                    position = top:1
                    kind = sp
                    direction =  out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8696, 8376
                ]

                port Qref_ext {
                    label = "Qref"
                    position = top:2
                    kind = sp
                    direction =  out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8696, 8488
                ]

                tag Goto4 {
                    value = "Id"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7960, 8256
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto5 {
                    value = "Iq"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7960, 8280
                    hide_name = True
                    size = 60, 20
                ]

                tag From38 {
                    value = "theta"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7744, 8344
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto13 {
                    value = "Idref"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 9248, 8256
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto12 {
                    value = "Iqref"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 9248, 8232
                    hide_name = True
                    size = 60, 20
                ]

                tag From3 {
                    value = "Id"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9056, 8392
                    hide_name = True
                    size = 60, 20
                ]

                tag From4 {
                    value = "Iq"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8992, 8408
                    hide_name = True
                    size = 60, 20
                ]

                tag From1 {
                    value = "Vd"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9056, 8424
                    hide_name = True
                    size = 60, 20
                ]

                tag From2 {
                    value = "Vq"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8992, 8440
                    hide_name = True
                    size = 60, 20
                ]

                tag From31 {
                    value = "enable"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9136, 8496
                    hide_name = True
                    size = 60, 20
                ]

                tag From19 {
                    value = "half_VDC"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9488, 8352
                    hide_name = True
                    size = 60, 20
                ]

                tag From22 {
                    value = "theta"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9856, 8448
                    hide_name = True
                    size = 60, 20
                ]

                tag From15 {
                    value = "I_ctrl_tg"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9360, 8280
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto14 {
                    value = "I_ctrl_tg"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 9520, 8216
                    hide_name = True
                    size = 60, 20
                ]

                tag From17 {
                    value = "I_ctrl_tg"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9360, 8432
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto15 {
                    value = "modA"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 10056, 8400
                    hide_name = True
                    size = 59, 20
                ]

                tag From16 {
                    value = "Idref"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9360, 8320
                    hide_name = True
                    size = 60, 20
                ]

                tag From18 {
                    value = "Iqref"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9360, 8472
                    hide_name = True
                    size = 60, 20
                ]

                tag From9 {
                    value = "P_ctrl_tg"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8776, 8296
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto11 {
                    value = "P_ctrl_tg"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8880, 8216
                    hide_name = True
                    size = 60, 20
                ]

                tag From12 {
                    value = "P_ctrl_tg"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8792, 8424
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto7 {
                    value = "zero"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8368, 7936
                    hide_name = True
                    size = 60, 20
                ]

                tag From21 {
                    value = "zero"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9792, 8432
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto16 {
                    value = "modB"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 10056, 8424
                    hide_name = True
                    size = 59, 20
                ]

                tag Goto17 {
                    value = "modC"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 10056, 8448
                    hide_name = True
                    size = 59, 20
                ]

                tag From45 {
                    value = "enable"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9664, 8968
                    hide_name = True
                    size = 60, 20
                ]

                tag From32 {
                    value = "modA"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9488, 8640
                    hide_name = True
                    size = 60, 20
                ]

                tag From34 {
                    value = "modB"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9488, 8768
                    hide_name = True
                    size = 60, 20
                ]

                tag From36 {
                    value = "modC"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9480, 8888
                    hide_name = True
                    size = 58, 20
                ]

                tag Goto8 {
                    value = "enable"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8952, 7912
                    hide_name = True
                    size = 60, 20
                ]

                tag From5 {
                    value = "Id"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8240, 8640
                    hide_name = True
                    size = 60, 20
                ]

                tag From6 {
                    value = "Iq"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8240, 8680
                    hide_name = True
                    size = 60, 20
                ]

                tag From7 {
                    value = "Vd"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8240, 8720
                    hide_name = True
                    size = 60, 20
                ]

                tag From8 {
                    value = "Vq"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8240, 8760
                    hide_name = True
                    size = 60, 20
                ]

                tag From33 {
                    value = "half_VDC"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9424, 8656
                    hide_name = True
                    size = 60, 20
                ]

                tag From35 {
                    value = "half_VDC"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9424, 8784
                    hide_name = True
                    size = 60, 20
                ]

                tag From37 {
                    value = "half_VDC"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9416, 8904
                    hide_name = True
                    size = 60, 20
                ]

                tag From40 {
                    value = "zero"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9656, 8680
                    hide_name = True
                    size = 60, 20
                ]

                tag From39 {
                    value = "enable"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9688, 8600
                    hide_name = True
                    size = 60, 20
                ]

                tag From41 {
                    value = "enable"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9688, 8728
                    hide_name = True
                    size = 60, 20
                ]

                tag From42 {
                    value = "zero"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9656, 8808
                    hide_name = True
                    size = 60, 20
                ]

                tag From43 {
                    value = "enable"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9696, 8848
                    hide_name = True
                    size = 60, 20
                ]

                tag From44 {
                    value = "zero"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9648, 8928
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto3 {
                    value = "theta"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7968, 8128
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto1 {
                    value = "Vd"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7960, 8064
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto2 {
                    value = "Vq"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8024, 8080
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto9 {
                    value = "Pref"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8744, 8144
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto10 {
                    value = "Qref"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8744, 8184
                    hide_name = True
                    size = 60, 20
                ]

                tag From11 {
                    value = "Pref"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8776, 8344
                    hide_name = True
                    size = 60, 20
                ]

                tag From14 {
                    value = "Qref"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8776, 8456
                    hide_name = True
                    size = 60, 20
                ]

                tag From23 {
                    value = "Vd"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7696, 8768
                    hide_name = True
                    size = 58, 20
                ]

                tag From24 {
                    value = "Id"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7632, 8784
                    hide_name = True
                    size = 60, 20
                ]

                tag From25 {
                    value = "Vq"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7696, 8816
                    hide_name = True
                    size = 60, 20
                ]

                tag From26 {
                    value = "Iq"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7632, 8832
                    hide_name = True
                    size = 60, 20
                ]

                tag From27 {
                    value = "Vq"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7696, 8880
                    hide_name = True
                    size = 58, 20
                ]

                tag From28 {
                    value = "Id"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7632, 8896
                    hide_name = True
                    size = 60, 20
                ]

                tag From29 {
                    value = "Vd"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7696, 8928
                    hide_name = True
                    size = 60, 20
                ]

                tag From30 {
                    value = "Iq"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7632, 8944
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto18 {
                    value = "P"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8056, 8800
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto19 {
                    value = "Q"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8056, 8912
                    hide_name = True
                    size = 60, 20
                ]

                tag From20 {
                    value = "half_VDC"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9488, 8504
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto6 {
                    value = "half_VDC"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7704, 8416
                    hide_name = True
                    size = 60, 20
                ]

                tag From46 {
                    value = "zero"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8656, 7992
                    hide_name = True
                    size = 60, 20
                ]

                junction Junction21 sp
                [
                    position = 9712, 8344
                ]

                junction Junction22 sp
                [
                    position = 9712, 8496
                ]

                junction Junction28 sp
                [
                    position = 8000, 8800
                ]

                junction Junction29 sp
                [
                    position = 8000, 8912
                ]

                comment Comment8 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Measurements		  			</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> </p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> </p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> </p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">    </p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">       </p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> </p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> </p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  </p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html> ENDCOMMENT 
                [
                    position = 6960, 8072
                ]

                comment Comment9 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">										Control Loop 					     		 			</p></body></html> ENDCOMMENT 
                [
                    position = 8112, 8064
                ]

                comment Comment10 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">							Debug 					     			  </p></body></html> ENDCOMMENT 
                [
                    position = 8128, 8552
                ]

                comment Comment2 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Inner Loop</p></body></html> ENDCOMMENT 
                [
                    position = 9160, 8312
                ]

                comment Comment3 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Ctrl_dbg = 1</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">to debug </p></body></html> ENDCOMMENT 
                [
                    position = 9432, 8144
                ]

                comment Comment20 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Ctrl_dbg = 1</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">to debug </p></body></html> ENDCOMMENT 
                [
                    position = 8792, 8144
                ]

                comment Comment13 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">				Output 					    </p></body></html> ENDCOMMENT 
                [
                    position = 9360, 8552
                ]

                comment Comment16 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Startup-Timer</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Wait a time to avoide</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">unstability in the begning</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">of the simulation </p></body></html> ENDCOMMENT 
                [
                    position = 8872, 7936
                ]

                comment Comment21 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">zero Constant</p></body></html> ENDCOMMENT 
                [
                    position = 8304, 7968
                ]

                connect Ipu.out "Bus Split2.in" as Connection848
                connect Iabc Ipu.in as Connection857
                connect Iabc2dq.wt From38 as Connection1019
                connect Goto4 Iabc2dq.d_axis as Connection1020
                connect Iabc2dq.q_axis Goto5 as Connection1021
                connect "Bus Split2.out" Iabc2dq.va as Connection1163
                connect Iabc2dq.vb "Bus Split2.out1" as Connection1164
                connect "Bus Split2.out2" Iabc2dq.vc as Connection1165
                connect Iq_ref.out Goto12 as Connection1100
                connect Id_ref.out Goto13 as Connection1101
                connect From3 Currrent_Control.Id as Connection3946
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect From4 Currrent_Control.Iq as Connection3947
                connect From1 Currrent_Control.Vd as Connection3948
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect From2 Currrent_Control.Vq as Connection3949
                connect From31 Currrent_Control.en as Connection3950
                connect Product5.in "Signal switch1.out" as Connection3960
                connect From15 "Signal switch1.in2" as Connection3961
                connect I_Ctrl_dbg.out Goto14 as Connection1097
                connect Product8.in "Signal switch2.out" as Connection3963
                connect From17 "Signal switch2.in2" as Connection3964
                connect From19 Product5.in1 as Connection4083
                connect From16 "Signal switch1.in" as Connection4196
                connect From18 "Signal switch2.in" as Connection4197
                connect Currrent_Control.md "Signal switch1.in1" as Connection4198
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect From9 "Signal switch7.in2" as Connection4230
                connect P_Ctrl_dbg.out Goto11 as Connection4231
                connect From12 "Signal switch8.in2" as Connection4234
                connect "Signal switch2.in1" Currrent_Control.mq as Connection4239
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect From22 dq2abc.wt as Connection4245
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect Zero_cte.out Goto7 as Connection4246
                connect From21 dq2abc.zero_input as Connection4247
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect md_prob.in Junction21 as Connection4248
                [
                    position = 0, 0
                ]
                connect Junction21 Product5.out as Connection4249
                connect dq2abc.d_input Junction21 as Connection4250
                connect mq_prob.in Junction22 as Connection4251
                connect Junction22 Product8.out as Connection4252
                connect dq2abc.q_input Junction22 as Connection4253
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect dq2abc.phase_a Goto15 as Connection4254
                connect dq2abc.phase_b Goto16 as Connection4255
                connect dq2abc.phase_c Goto17 as Connection4256
                connect From45 en_inv as Connection359
                connect Clock1.out Comparator1.in2 as Connection204
                connect Constant5.out Comparator1.in1 as Connection205
                connect Comparator1.out "Edge Detection1.In1" as Connection206
                connect "Edge Detection1.Out1" "SR Flip Flop1.s_in" as Connection207
                connect "SR Flip Flop1.out" "Logical operator2.in1" as Connection209
                connect Termination6.in "SR Flip Flop1.out_n" as Connection214
                connect enable.out "Logical operator2.in" as Connection4046
                connect "Logical operator2.out" Goto8 as Connection4047
                connect From5 Id_pb.in as Connection3967
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect From6 Iq_pb.in as Connection3968
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect From7 Vd_pb.in as Connection3969
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect From8 Vq_pb.in as Connection3970
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect Product9.out Gain1.in as Connection4264
                connect Product10.out Gain2.in as Connection4265
                connect Product11.out Gain3.in as Connection4266
                connect From33 Product9.in1 as Connection4267
                connect From32 Product9.in as Connection4268
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect From35 Product10.in1 as Connection4269
                connect From34 Product10.in as Connection4270
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect From36 Product11.in as Connection4271
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect From37 Product11.in1 as Connection4272
                connect "Signal switch9.out" modA as Connection4274
                connect Gain1.out "Signal switch9.in" as Connection4275
                connect From40 "Signal switch9.in1" as Connection4276
                connect From39 "Signal switch9.in2" as Connection4277
                connect "Signal switch10.out" modB as Connection4278
                connect Gain2.out "Signal switch10.in" as Connection4279
                connect From41 "Signal switch10.in2" as Connection4280
                connect From42 "Signal switch10.in1" as Connection4281
                connect From43 "Signal switch11.in2" as Connection4282
                connect "Signal switch11.out" modC as Connection4283
                connect Gain3.out "Signal switch11.in" as Connection4284
                connect From44 "Signal switch11.in1" as Connection4285
                connect Vpu.in Vabc as Connection814
                connect PLL_V.freq Termination1.in as Connection943
                connect PLL_V.theta Goto3 as Connection944
                connect "Bus Split1.out" PLL_V.va as Connection1160
                connect PLL_V.vb "Bus Split1.out1" as Connection1161
                connect "Bus Split1.out2" PLL_V.vc as Connection1162
                connect P_ref.out Goto9 as Connection4341
                connect Q_ref.out Goto10 as Connection4342
                connect From23 Product12.in as Connection4354
                connect From24 Product12.in1 as Connection4355
                connect From25 Product13.in as Connection4356
                connect From26 Product13.in1 as Connection4357
                connect Product12.out Sum2.in as Connection4360
                connect Product13.out Sum2.in1 as Connection4361
                connect From27 Product15.in as Connection4365
                connect From28 Product15.in1 as Connection4366
                connect From29 Product16.in as Connection4367
                connect Product15.out Sum3.in as Connection4368
                connect Product16.out Sum3.in1 as Connection4369
                connect From30 Product16.in1 as Connection4370
                connect Pmeas.in Junction28 as Connection4385
                connect Junction28 Goto18 as Connection4386
                [
                    position = 0, 0
                ]
                connect Sum2.out Junction28 as Connection4387
                connect Goto19 Junction29 as Connection4389
                connect Junction29 Sum3.out as Connection4390
                connect Qmeas.in Junction29 as Connection4391
                connect PLL_V.d_axis Goto1 as Connection4392
                connect PLL_V.q_axis Goto2 as Connection4393
                connect "Bus Split1.in" Vpu.out as Connection4394
                [
                    position = 0, 0
                ]
                connect Iabc2dq.zero_axis Termination2.in as Connection4395
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect "Signal switch7.out" Currrent_Control.Idref as Connection4396
                [
                    position = 0, 0
                    hide_name = True
                ]
                connect "Signal switch8.out" Currrent_Control.Iqref as Connection4397
                [
                    position = 0, 0
                    hide_name = True
                    breakpoints = 8936, 8472; 8936, 8376
                ]
                connect From20 Product8.in1 as Connection4398
                connect half_VDCpu.out Goto6 as Connection4399
                connect From46 "SR Flip Flop1.r_in" as Connection4400
                connect From11 "Signal switch7.in" as Connection4401
                connect From14 "Signal switch8.in" as Connection4402
                connect Pref_ext "Signal switch7.in1" as Connection4403
                connect Qref_ext "Signal switch8.in1" as Connection4404
            }
            [
                position = 7888, 7648
                size = 96, 144
            ]

            component "core/Bus Join" Vlist {
                inputs = "3"
            }
            [
                position = 7760, 7600
            ]

            component "core/Bus Join" Ilist {
                inputs = "3"
            }
            [
                position = 7760, 7696
            ]

            component "core/Termination" Termination1 {
            }
            [
                position = 8024, 7696
                hide_name = True
            ]

            component "core/Product" Product1 {
                signs = "3"
            }
            [
                position = 7520, 7456
            ]

            component "core/SCADA Input" Irradiance {
                def_value = "irrad"
                execution_rate = "ts"
                max = "10"
                min = "0"
                unit = ""
            }
            [
                position = 7304, 7456
            ]

            component "core/SCADA Input" Pmpp {
                def_value = "pmpp"
                execution_rate = "ts"
                min = "0"
                unit = ""
            }
            [
                position = 7304, 7392
            ]

            component "core/SCADA Input" Temperature {
                def_value = "temp"
                execution_rate = "ts"
                max = "150"
                min = "0"
                unit = "C"
            }
            [
                position = 7304, 7520
            ]

            component "core/1D look-up table" PvsT {
                in_vec_x = "xycurve_xarray_cf"
                out_vec_f_x = "xycurve_yarray_cf"
                table_impl = "Non-equidistant"
            }
            [
                position = 7392, 7520
            ]

            component "core/Gain" Pdc_pu {
                gain = "1/power"
            }
            [
                position = 7648, 7456
            ]

            component "core/1D look-up table" Eff {
                in_vec_x = "xycurve_xarray_eff"
                out_vec_f_x = "xycurve_yarray_eff"
                table_impl = "Non-equidistant"
            }
            [
                position = 7728, 7456
            ]

            component "core/SCADA Input" Qref {
                execution_rate = "ts"
                max = "150"
                min = "0"
                unit = "kvar"
            }
            [
                position = 7304, 7304
            ]

            component "core/Gain" Qref_pu {
                gain = "1/power"
            }
            [
                position = 7640, 7304
            ]

            component "core/Probe" Probe1 {
            }
            [
                position = 7600, 7400
            ]

            component "core/Probe" Probe3 {
            }
            [
                position = 7896, 7464
            ]

            component "core/Probe" Probe0 {
            }
            [
                position = 7464, 7552
            ]

            component "core/Probe" Probe2 {
            }
            [
                position = 7808, 7392
            ]

            component "core/Product" Product2 {
            }
            [
                position = 7816, 7464
                hide_name = True
            ]

            port A1 {
                label = "A"
                position = right:1
                kind = pe
            }
            [
                position = 8552, 7944
                scale = -1, 1
            ]

            port B1 {
                label = "B"
                position = right:2
                kind = pe
            }
            [
                position = 8312, 8096
                scale = -1, 1
            ]

            port C1 {
                label = "C"
                position = right:3
                kind = pe
            }
            [
                position = 8120, 8272
                scale = -1, 1
            ]

            port N {
                position = right:4
                kind = pe
            }
            [
                position = 7128, 8096
            ]

            tag From1 {
                value = "modA"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7568, 7904
                hide_name = True
                size = 60, 20
            ]

            tag From2 {
                value = "modB"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7568, 8056
                hide_name = True
                size = 60, 20
            ]

            tag From3 {
                value = "modC"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7560, 8232
                hide_name = True
                size = 60, 20
            ]

            tag Goto1 {
                value = "ia"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7792, 7904
                hide_name = True
                size = 60, 20
            ]

            tag Goto2 {
                value = "ib"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7792, 8056
                hide_name = True
                size = 60, 20
            ]

            tag Goto3 {
                value = "ic"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7784, 8232
                hide_name = True
                size = 60, 20
            ]

            tag gnd_src {
                value = "Ground"
                scope = local
                kind = pe
            }
            [
                position = 7216, 8096
                scale = -1, 1
                size = 60, 20
            ]

            tag gnd_tag {
                value = "Ground"
                scope = local
                kind = pe
            }
            [
                position = 7360, 8096
                hide_name = True
                size = 60, 20
            ]

            tag gnd_tag4 {
                value = "Ground"
                scope = local
                kind = pe
            }
            [
                position = 8488, 8176
                rotation = left
                hide_name = True
                size = 60, 20
            ]

            tag gnd_tag5 {
                value = "Ground"
                scope = local
                kind = pe
            }
            [
                position = 8272, 8352
                rotation = left
                hide_name = True
                size = 60, 20
            ]

            tag gnd_tag6 {
                value = "Ground"
                scope = local
                kind = pe
            }
            [
                position = 8080, 8536
                rotation = left
                hide_name = True
                size = 60, 20
            ]

            tag Goto4 {
                value = "va"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8568, 8096
                hide_name = True
                size = 60, 20
            ]

            tag Goto5 {
                value = "vb"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8352, 8272
                hide_name = True
                size = 60, 20
            ]

            tag Goto6 {
                value = "vc"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8160, 8432
                hide_name = True
                size = 60, 20
            ]

            tag From4 {
                value = "va"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7608, 7584
                hide_name = True
                size = 60, 20
            ]

            tag From5 {
                value = "vb"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7672, 7600
                hide_name = True
                size = 60, 20
            ]

            tag From6 {
                value = "vc"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7608, 7616
                hide_name = True
                size = 60, 20
            ]

            tag From7 {
                value = "ia"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7608, 7680
                hide_name = True
                size = 60, 20
            ]

            tag From8 {
                value = "ib"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7672, 7696
                hide_name = True
                size = 60, 20
            ]

            tag From9 {
                value = "ic"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7608, 7712
                hide_name = True
                size = 60, 20
            ]

            tag Goto7 {
                value = "modA"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8024, 7600
                hide_name = True
                size = 60, 20
            ]

            tag Goto8 {
                value = "modB"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8024, 7632
                hide_name = True
                size = 60, 20
            ]

            tag Goto9 {
                value = "modC"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8024, 7664
                hide_name = True
                size = 60, 20
            ]

            junction Junction1 pe
            [
                position = 7456, 8096
            ]

            junction Junction7 pe
            [
                position = 7456, 8096
            ]

            junction Junction8 pe
            [
                position = 8488, 7944
            ]

            junction Junction9 pe
            [
                position = 8272, 8096
            ]

            junction Junction10 pe
            [
                position = 8080, 8272
            ]

            junction Junction11 sp
            [
                position = 7560, 7456
            ]

            junction Junction13 sp
            [
                position = 7440, 7520
            ]

            junction Junction14 sp
            [
                position = 7768, 7456
            ]

            junction Junction15 sp
            [
                position = 7688, 7456
            ]

            junction Junction16 sp
            [
                position = 7856, 7464
            ]

            comment Comment22 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Calculation of PV array's output power</p></body></html> ENDCOMMENT 
            [
                position = 7336, 7256
            ]

            connect LfA.n_node RfA.p_node as Connection941
            connect RfB.p_node LfB.n_node as Connection942
            connect LfC.n_node RfC.p_node as Connection948
            connect From1 VspA.in as Connection1855
            connect From2 VspB.in as Connection1856
            connect From3 VspC.in as Connection1857
            connect LfA.p_node IA.n_node as Connection1869
            connect IA.p_node VspA.p_node as Connection1870
            connect IA.out Goto1 as Connection1871
            connect LfB.p_node IB.n_node as Connection1872
            connect IB.p_node VspB.p_node as Connection1873
            connect Goto2 IB.out as Connection1874
            connect VspC.p_node IC.p_node as Connection1875
            connect IC.n_node LfC.p_node as Connection1876
            connect IC.out Goto3 as Connection1877
            connect Junction1 VspB.n_node as Connection1880
            [
                position = 0, 0
            ]
            connect VspA.n_node Junction1 as Connection1881
            connect gnd_src N as Connection1907
            connect Junction1 Junction7 as Connection1908
            connect gnd_tag Junction7 as Connection1910
            connect VspC.n_node Junction7 as Connection1911
            [
                position = 0, 0
            ]
            connect gnd_tag4 VA.n_node as Connection1915
            connect Junction8 A1 as Connection1917
            connect VA.p_node Junction8 as Connection1918
            connect gnd_tag5 VB.n_node as Connection1919
            connect Junction9 B1 as Connection1921
            connect VB.p_node Junction9 as Connection1922
            connect gnd_tag6 VC.n_node as Connection1923
            connect Junction10 C1 as Connection1925
            connect VC.p_node Junction10 as Connection1926
            connect Goto4 VA.out as Connection1927
            connect Goto5 VB.out as Connection1928
            connect Goto6 VC.out as Connection1929
            connect PVControl.Vabc Vlist.out as Connection1930
            connect PVControl.Iabc Ilist.out as Connection1931
            connect Ilist.in From7 as Connection1932
            connect Ilist.in1 From8 as Connection1933
            connect Ilist.in2 From9 as Connection1934
            connect Vlist.in From4 as Connection1935
            connect Vlist.in1 From5 as Connection1936
            connect Vlist.in2 From6 as Connection1937
            connect PVControl.modA Goto7 as Connection1938
            connect PVControl.modB Goto8 as Connection1939
            connect PVControl.modC Goto9 as Connection1940
            connect PVControl.en_inv Termination1.in as Connection1941
            connect RfC.n_node Junction10 as Connection1942
            [
                breakpoints = 8000, 8272
            ]
            connect RfB.n_node Junction9 as Connection1943
            [
                breakpoints = 8200, 8096
            ]
            connect RfA.n_node Junction8 as Connection1944
            [
                breakpoints = 8416, 7944
            ]
            connect PvsT.addr Temperature.out as Connection1945
            connect Irradiance.out Product1.in1 as Connection1947
            connect Pmpp.out Product1.in as Connection1948
            connect Qref.out Qref_pu.in as Connection1951
            connect Qref_pu.out PVControl.Qref_ext as Connection1952
            connect Product1.out Junction11 as Connection1954
            connect Junction11 Pdc_pu.in as Connection1955
            connect Probe1.in Junction11 as Connection1956
            connect PvsT.value Junction13 as Connection1960
            connect Junction13 Product1.in2 as Connection1961
            connect Probe0.in Junction13 as Connection1962
            connect Eff.value Junction14 as Connection1965
            connect Junction14 Product2.in as Connection1966
            connect Probe2.in Junction14 as Connection1967
            connect Pdc_pu.out Junction15 as Connection1968
            connect Junction15 Eff.addr as Connection1969
            connect Product2.in1 Junction15 as Connection1970
            [
                breakpoints = 7768, 7472; 7768, 7512
            ]
            connect Product2.out Junction16 as Connection1972
            connect Junction16 PVControl.Pref_ext as Connection1973
            connect Probe3.in Junction16 as Connection1974

            mask {
                description = "<html><head><meta name=\"qrichtext\" content=\"1\"></meta><style type=\"text/css\">p, li { white-space: pre-wrap; }</style></head><body style=\"\"><p style=\"margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\">Remember to copu the tse_component_edit.tlib to the pvsystem.tlib and rollback it!!!!!!!!!!!!!!!</p></body></html>"

                power {
                    label = "Power Rating"
                    widget = edit
                    type = generic
                    default_value = "100"
                    unit = "kVA"
                    group = "PV Inverter:!"
                }

                voltage {
                    label = "Nominal Voltage"
                    widget = edit
                    type = generic
                    default_value = "115"
                    unit = "kV"
                    group = "PV Inverter"
                }

                freq {
                    label = "Frequency"
                    widget = edit
                    type = generic
                    default_value = "60"
                    unit = "Hz"
                    group = "PV Inverter"
                }

                phases {
                    label = "Number of Phases"
                    widget = combo
                    combo_values = "3"
                    type = string
                    default_value = "3"
                    group = "PV Inverter"
                    no_evaluate
                }

                grouding {
                    label = "Ground-Connected"
                    widget = checkbox
                    type = bool
                    default_value = "False"
                    group = "PV Inverter"
                    no_evaluate
                }

                xycurve_name_eff {
                    label = "Efficiency XYCurve Name"
                    widget = edit
                    type = generic
                    default_value = "Eff"
                    group = "PV Inverter"
                    no_evaluate
                }

                xycurve_npts_eff {
                    label = "Efficiency XYCurve N. Points"
                    widget = edit
                    type = generic
                    default_value = "4"
                    group = "PV Inverter"
                    no_evaluate
                }

                xycurve_xarray_eff {
                    label = "Efficiency Curve X Array"
                    widget = edit
                    type = generic
                    default_value = "[.1, .2, .4, 1.0]"
                    group = "PV Inverter"
                    no_evaluate
                }

                xycurve_yarray_eff {
                    label = "Efficiency Curve Y Array"
                    widget = edit
                    type = generic
                    default_value = "[.86, .9, .93, .97]"
                    group = "PV Inverter"
                    no_evaluate
                }

                pmpp {
                    label = "Array MPPT"
                    widget = edit
                    type = generic
                    default_value = "1000"
                    unit = "kW"
                    group = "PV Array:2"
                }

                irrad {
                    label = "Irradiance"
                    widget = edit
                    type = generic
                    default_value = "1"
                    unit = "kW/m2"
                    group = "PV Array"
                }

                temp {
                    label = "Temperature"
                    widget = edit
                    type = generic
                    default_value = "0"
                    unit = "C"
                    group = "PV Array"
                }

                xycurve_name_cf {
                    label = "Correction Factor XYCurve Name"
                    widget = edit
                    type = generic
                    default_value = "PvsT"
                    group = "PV Array"
                    no_evaluate
                }

                xycurve_npts_cf {
                    label = "Correction Factor XYCurve N. Points"
                    widget = edit
                    type = generic
                    default_value = "4"
                    group = "PV Array"
                    no_evaluate
                }

                xycurve_xarray_cf {
                    label = "Correction Factor XYCurve X Array"
                    widget = edit
                    type = generic
                    default_value = "[0, 25, 75, 100]"
                    group = "PV Array"
                    no_evaluate
                }

                xycurve_yarray_cf {
                    label = "Correction Factor XYCurve Y Array"
                    widget = edit
                    type = generic
                    default_value = "[1.2, 1.0, 0.8, 0.6]"
                    group = "PV Array"
                    no_evaluate
                }

                Lf {
                    label = "L Output Filter"
                    widget = edit
                    type = generic
                    default_value = "0"
                    unit = "H"
                    group = "Typhoon"
                }

                Rf {
                    label = "R Output Filter"
                    widget = edit
                    type = generic
                    default_value = "0"
                    unit = ""
                    group = "Typhoon"
                }

                Ikp {
                    label = "Current Controller Kp (Inner Loop)"
                    widget = edit
                    type = generic
                    default_value = "0"
                    group = "Typhoon"
                }

                Iki {
                    label = "Current Controller Ki (Inner Loop)"
                    widget = edit
                    type = generic
                    default_value = "0"
                    group = "Typhoon"
                }

                ts {
                    label = "Execution Rate"
                    widget = edit
                    type = generic
                    default_value = "100e-6"
                    group = "Typhoon:3"
                }

                CODE open
                    from typhoon.apps.schematic_editor.dialogs.component_property_dialogs.general import RegularComponentPropertiesDialog
                
                    dialog = RegularComponentPropertiesDialog(
                        component=component,
                        property_container=component.masks[-1],
                        current_diagram=current_diagram
                    )
                    dialog.exec_()
                    
                ENDCODE

                CODE pre_compile
                    # HEADER START
                    power = mdl.get_property_value(mdl.prop(item_handle, "power"))
                    voltage = mdl.get_property_value(mdl.prop(item_handle, "voltage"))
                    freq = mdl.get_property_value(mdl.prop(item_handle, "freq"))
                    phases = mdl.get_property_value(mdl.prop(item_handle, "phases"))
                    grouding = mdl.get_property_value(mdl.prop(item_handle, "grouding"))
                    xycurve_name_eff = mdl.get_property_value(mdl.prop(item_handle, "xycurve_name_eff"))
                    xycurve_npts_eff = mdl.get_property_value(mdl.prop(item_handle, "xycurve_npts_eff"))
                    xycurve_xarray_eff = mdl.get_property_value(mdl.prop(item_handle, "xycurve_xarray_eff"))
                    xycurve_yarray_eff = mdl.get_property_value(mdl.prop(item_handle, "xycurve_yarray_eff"))
                    pmpp = mdl.get_property_value(mdl.prop(item_handle, "pmpp"))
                    irrad = mdl.get_property_value(mdl.prop(item_handle, "irrad"))
                    temp = mdl.get_property_value(mdl.prop(item_handle, "temp"))
                    xycurve_name_cf = mdl.get_property_value(mdl.prop(item_handle, "xycurve_name_cf"))
                    xycurve_npts_cf = mdl.get_property_value(mdl.prop(item_handle, "xycurve_npts_cf"))
                    xycurve_xarray_cf = mdl.get_property_value(mdl.prop(item_handle, "xycurve_xarray_cf"))
                    xycurve_yarray_cf = mdl.get_property_value(mdl.prop(item_handle, "xycurve_yarray_cf"))
                    Lf = mdl.get_property_value(mdl.prop(item_handle, "Lf"))
                    Rf = mdl.get_property_value(mdl.prop(item_handle, "Rf"))
                    Ikp = mdl.get_property_value(mdl.prop(item_handle, "Ikp"))
                    Iki = mdl.get_property_value(mdl.prop(item_handle, "Iki"))
                    ts = mdl.get_property_value(mdl.prop(item_handle, "ts"))
                    # HEADER STOP
                    
                    
                    ## Constants
                    wref = 2*np.pi*freq
                    Vac_nom_pk = voltage*1e3*np.sqrt(2/3)
                    Iac_nom_pk = (power/(np.sqrt(3)*voltage))*np.sqrt(2)
                    UpperLimit_I = 1.2
                    LowerLimit_I = -1.2
                    Zb = 1e3*voltage*voltage/power
                    Xl_pu = wref*Lf/Zb
                ENDCODE
            }
        }
        [
            position = 8168, 8368
            size = 104, 144
        ]
    }

    default {
        "core/1D look-up table" {
            in_vec_x = "np.arange(-5,6)"
            out_vec_f_x = "np.arange(-5,6)**2"
            table_impl = "Equidistant"
            ext_mode = "Clip"
            execution_rate = "inherit"
        }

        "core/Bus Join" {
            inputs = "2"
            execution_rate = "inherit"
        }

        "core/Bus Split" {
            outputs = "2"
            execution_rate = "inherit"
        }

        "core/Clock" {
            enb_reset = "False"
            reset_at = "1.0"
            execution_rate = "100e-6"
        }

        "core/Comparator" {
            execution_rate = "inherit"
        }

        "core/Constant" {
            value = "1"
            signal_type = "real"
            execution_rate = "100e-6"
            _tunable = "False"
        }

        "core/Gain" {
            gain = "1"
            multiplication = "Element-wise(K.*u)"
            _tunable = "False"
            execution_rate = "inherit"
        }

        "core/Inductor" {
            inductance = "1e-3"
            initial_current = "0.0"
            pole_shift_ignore = "False"
            visible = "True"
        }

        "core/Limit" {
            upper_limit = "[\'inf\']"
            lower_limit = "[\'-inf\']"
            execution_rate = "inherit"
        }

        "core/Logical operator" {
            operator = "AND"
            inputs = "2"
            execution_rate = "inherit"
        }

        "core/PID controller" {
            controller_type = "PID"
            kp = "1"
            kp_source = "internal"
            ki = "1"
            ki_source = "internal"
            kd = "0"
            kd_source = "internal"
            filt_coef = "100"
            int_init_value = "0"
            filt_init_value = "0"
            enb_output_limit_out = "False"
            show_reset = "none"
            upper_sat_lim = "1"
            upper_sat_lim_source = "internal"
            lower_sat_lim = "-1"
            lower_sat_lim_source = "internal"
            enb_anti_windup_out = "False"
            signal_out_type = "inherit"
            _tunable = "False"
            execution_rate = "inherit"
        }

        "core/Probe" {
            signal_access = "inherit"
            addr = "0"
            override_signal_name = "False"
            signal_name = ""
            signal_type = "generic"
            streaming_en = "False"
            streaming_er_idx = "0"
            execution_rate = "inherit"
        }

        "core/Product" {
            signs = "2"
            execution_rate = "inherit"
        }

        "core/Resistor" {
            resistance = "1"
            param_set = ""
        }

        "core/SCADA Input" {
            addr = "0"
            format = "real"
            override_signal_name = "False"
            signal_name = ""
            signal_type = "real"
            min = "-1e6"
            max = "1e6"
            def_value = "0"
            unit = " "
            execution_rate = "100e-6"
        }

        "core/SR Flip Flop" {
            init_value = "0"
            execution_rate = "inherit"
        }

        "core/Signal switch" {
            criterion = "ctrl > threshold"
            threshold = "0.5"
            execution_rate = "inherit"
        }

        "core/Sum" {
            signs = "2"
            execution_rate = "inherit"
        }

        "core/Termination" {
            execution_rate = "inherit"
        }

        "core/Current Measurement" {
            signal_access = "inherit"
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            sig_output_filt_and_full_bw = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }

        "core/Edge Detection" {
            edge = "both"
            execution_rate = "inherit"
        }

        "core/Signal Controlled Voltage Source" {
            execution_rate = "inherit"
        }

        "core/Three phase PLL" {
            initial_filter_output = "60"
            wn = "157.0796"
            zeta = "0.707"
            rate_high = "12"
            rate_low = "-12"
            freq_unit = "Hz"
            kp = "100"
            ki = "3200"
            kd = "1"
            N = "714.2857"
            initial_pid_output = "376.99111843"
            up_lim = "1e4"
            low_lim = "-1e4"
            kb = "1"
            power_form = "variant - Clarke\'s original"
            alignment = "-pi/2"
            disable_filter = "False"
            wn_LPFdq = "62.83185307"
            execution_rate = "inherit"
            enable_pk = "False"
            enable_zero = "True"
            enable_sin = "True"
        }

        "core/Voltage Measurement" {
            signal_access = "inherit"
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            sig_output_filt_and_full_bw = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }

        "core/abc to dq" {
            power_form = "variant - Clarke\'s original"
            alignment = "-pi/2"
            disable_filter = "True"
            initial_filter_output = "0"
            wn_LPFdq = "1000"
            execution_rate = "inherit"
            _tunable = "False"
        }

        "core/dq to abc" {
            power_form = "variant - Clarke\'s original"
            alignment = "-pi/2"
            execution_rate = "0"
        }
    }
}
